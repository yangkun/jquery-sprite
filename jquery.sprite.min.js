;(function($){$.fn.sprite=function(options){var base=this,opts=$.extend(true,{},$.fn.sprite.defaults,options||{}),w=opts.cellSize[0],h=opts.cellSize[1],ys=opts.cells[0],xs=opts.cells[1],row=opts.initCell[0],col=opts.initCell[1],offx=opts.offset[0],offy=opts.offset[1],timer=null;this.next=function(){var last=false;if(opts.vertical===true){last=row+1>ys-1;row=!last?row+1:0;}else{last=col+1>xs-1;col=!last?col+1:0;}
_setSprite(base,row,col,last);};this.prev=function(){var last=false;if(opts.vertical===true){last=row-1<0;row=!last?row-1:0;}else{last=col-1<0;col=!last?col-1:0;}
_setSprite(base,row,col,last);};this.go=function(){if(timer)base.stop();if(!timer)timer=setInterval(this.next,opts.interval);};this.revert=function(){if(timer)base.stop();if(!timer)timer=setInterval(this.prev,opts.interval);};this.stop=function(){if(timer){clearTimeout(timer);timer=null;}};this.cell=function(r,c){row=r;col=c;_setSprite(base,row,col,false);};this.row=function(r){if(r>ys-1)r=(opts.wrap)?0:ys-1;if(r<0)r=(opts.wrap)?ys-1:0;this.cell(r,0);};this.col=function(c){if(c>xs-1)c=(opts.wrap)?0:xs-1;if(c<0)c=(opts.wrap)?xs-1:0;this.cell(row,c);};this.offset=function(x,y){offx=x;offy=y;_setSprite(0,0,false);};return this.each(function(index,el){var $this=$(this);$this.css({'width':w,'height':h});if($this.css('display')=='inline')$this.css('display','inline-block');_setSprite(this,row,col,false,(opts.offsInitial?true:false));});function _setSprite(el,row,col,last,initial){if(last){opts.complete();if(!opts.wrap){base.stop();return;}}
initial=typeof initial!=='undefined'?initial:true;var x=(-1*((w*col)+(initial?0:offx))),y=(-1*((h*row)+(initial?0:offy)));$(el).css('background-position',x+'px '+y+'px');}};$.fn.sprite.defaults={cellSize:[0,0],cells:[1,1],initCell:[0,0],offset:[0,0],interval:50,offsInitial:false,vertical:false,wrap:true,complete:function(){}};})(jQuery);